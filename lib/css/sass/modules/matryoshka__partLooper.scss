@import "compass";
@import "../base/matryoshka__vars";

.matryoshka__body {

	.matryoshka__nestable__container {

		margin: 0.5em 0;
		width: 100%;
		position: relative;
		text-align: left;
		color: #222;

		@include clearfix;
		@include border-radius( $border-radius-def );

		// This is used for hiding stuff.
		&--hidden {

			opacity: 0.5;
			cursor: pointer;

			.matryoshka__nestable__container__col {
				&--right,
				&--parts {
					max-height: 35px;
					overflow: hidden;
				}
			}
		}

		& .matryoshka__nestable__container {
			font-size: 0.95em;
		}

		&--login {
			width: 30em;
			margin: 22% auto;
		}

	}

	.matryoshka__nestable__container__col {

		$border-color: #ccc;

		float: left;
		padding: 0.9em 0.8em 0.8em;

		&--left {
			width: 100%;
			position: relative;
			padding-bottom: 0;
			overflow: hidden;
			background: #fafafa;
		}
		&--left h3 {
			float: left;
		}
		&--right {
			width: 100%;
			border-top: 1px solid $border-color;
			background: #fff;
		}
		&--parts {

			padding: 0.5em 0.6em 0.2em;
			width: 100%;
			background: #E9E9E9;
			text-align: center;
			border: 1px dashed #B1B1B1;

			& .matryoshka__nestable__container__col--parts {
				background: rgba(black, 0.015);
			}

		}

		// This class is for currently focused elements.
		&--focus {

			$widthAndHeight: 95%;
			$remaingMargin: (100% - $widthAndHeight) / 2;

			position: fixed;
			z-index: 80;
			width: $widthAndHeight !important;
			height: ($widthAndHeight - ($remaingMargin*3)) !important;
			margin: $remaingMargin;
			top: 0;
			left: 0;
			overflow: auto;
			background: #fafafa;
			border-bottom: 2px solid #B1B1B1;

			@include box-shadow( 0 0 300px 300px $color-green-light );

			textarea {
				height: 12em;
			}

			& > .matryoshka__nestable__container__col--parts {
				background: #E9E9E9;
			}

			& > .matryoshka__nestable__container__col--right {
				margin-top: 2.8em;
			}

			& > .matryoshka__nestable__container__col--left {
				position: fixed;
				width: $widthAndHeight;
				background: #fff;
				z-index: 90;
				background: #fafafa;
				border-bottom: 1px solid $border-color;
			}

			// This is for hiding all other buttons except for the focus-button
			// which unfocuses the currently focused el. That button is the way
			// out of the focus.
			& > .matryoshka__nestable__container__col--left .matryoshka__nestable__container__button {

				display: none;

				&.focus-on-part {
					display: block;
				}

			}

			& > .matryoshka__nestable__container__col--left .matryoshka__nestableSubPartButtons {
				display: block;
			}

		}

	}

	.matryoshka__nestable__container__add-part-container {
		display: none;
	}

	.matryoshka__nestable__container__add-part-container__inner {
		position: fixed;
		top: 20%;
		left: 10%;
		background: #FFF;
		width: 80%;
		z-index: 200;
		padding: 1em;
		text-align: center;

		@include border-radius(0.3em);
		@include box-shadow(0 7px 15px rgba(black, 0.5));

		& .matryoshka__nestable__container__button {
			margin: 0.2em;
		}

		&__part {
			margin-bottom: 1em;
		}

	}
	.matryoshka__nestable__container__add-part-container__extra-fader {
		position: fixed;
		top: 0;
		left: 0;
		height: 100%;
		width: 100%;
		background: rgba(black, 0.2);
		z-index: 100;
	}

	.matryoshka__nestableSubPartButtons {
		float: right;
		margin-top: -0.3em;
		display: none;
		&--hidden {
			display: block;
		}
	}

	.matryoshka__nestable__container__col--left:hover .matryoshka__nestableSubPartButtons {
		display: block;
		&--hidden {
			display: none;
		}
	}

	.matryoshka__nestable__container__button {

		border: none;
		font-size: 0.7em;
		padding: 0.8em 2em 0.8em 1.5em;
		cursor: pointer;
		font-family: inherit;
		background: $color-green;
		outline: none;
		color: #333;

		@include border-radius(0.4em);

		&:hover {
			color: #000;
		}

		&--transparent {
			background: none;
			opacity: 0.4;
		}

		&--absolute {

			height: 1.9em;
			width: 1.9em;
			padding: 0;
			text-align: center;
			font-size: 0.85em;

			&.delete-part {
				background: $color-red;
			}

		}
	}

}
